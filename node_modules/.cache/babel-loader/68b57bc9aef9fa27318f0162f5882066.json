{"ast":null,"code":"import _slicedToArray from\"/home/fatima/Xero-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState,useEffect}from\"react\";import axios from'axios';import mondaySdk from\"monday-sdk-js\";// Usage of mondaySDK example, for more information visit here: https://developer.monday.com/apps/docs/introduction-to-the-sdk/\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var monday=mondaySdk();var App=function App(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),context=_useState2[0],setContext=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAuthorized=_useState4[0],setIsAuthorized=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),invoices=_useState6[0],setInvoices=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),clientId=_useState8[0],setClientId=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),clientSecret=_useState10[0],setClientSecret=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),redirectUri=_useState12[0],setRedirectUri=_useState12[1];useEffect(function(){// Notice this method notifies the monday platform that user gains a first value in an app.\n// Read more about it here: https://developer.monday.com/apps/docs/mondayexecute#value-created-for-user/\nmonday.execute(\"valueCreatedForUser\");// TODO: set up event listeners, Here`s an example, read more here: https://developer.monday.com/apps/docs/mondaylisten/\nmonday.listen(\"context\",function(res){setContext(res.data);});},[]);var fetchInvoices=function fetchInvoices(){axios.get('https://i9j279set4.execute-api.us-east-1.amazonaws.com/prod/invoice').then(function(response){var fetchedInvoices=response.data;setInvoices(fetchedInvoices.invoices);}).catch(function(error){console.error('Error fetching invoices:',error);});};var handleAuthorizeClick=function handleAuthorizeClick(){// Construct the authorization URL with user-provided credentials\nvar authorizationUrl=\"https://i9j279set4.execute-api.us-east-1.amazonaws.com/prod/connect?clientId=\".concat(encodeURIComponent(clientId),\"&clientSecret=\").concat(encodeURIComponent(clientSecret),\"&redirectUri=\").concat(encodeURIComponent(redirectUri));// Redirect the user to the authorization URL\nwindow.location.href=authorizationUrl;};useEffect(function(){var urlParams=new URLSearchParams(window.location.search);var authorized=urlParams.get('authorized');if(authorized==='true'){setIsAuthorized(true);}},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"container text-center mb-5 mt-5\",children:!isAuthorized?/*#__PURE__*/_jsxs(\"div\",{class:\"mb-5\",children:[/*#__PURE__*/_jsx(\"h2\",{class:\"mb-5\",children:\"Enter Your Xero API Credentials\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3 shadow\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text\",id:\"inputGroup-sizing-default\",children:\"Client Id\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clientId,onChange:function onChange(e){return setClientId(e.target.value);},class:\"form-control \"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3 shadow\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text\",id:\"inputGroup-sizing-default\",children:\"Client Secret\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clientSecret,onChange:function onChange(e){return setClientSecret(e.target.value);},class:\"form-control \"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3 shadow\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text\",id:\"inputGroup-sizing-default\",children:\"Redirect Uri\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:redirectUri,onChange:function onChange(e){return setRedirectUri(e.target.value);},class:\"form-control \"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAuthorizeClick,class:\"btn btn-outline-dark btn-lg\",children:\"Submit\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark btn-lg mb-3\",onClick:fetchInvoices,children:\"Fetch Invoices\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Invoice Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount Due\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reference\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Object.keys(invoices).map(function(key){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:invoices[key].invoiceNumber}),/*#__PURE__*/_jsx(\"td\",{children:invoices[key].amountDue}),/*#__PURE__*/_jsx(\"td\",{children:invoices[key].reference}),/*#__PURE__*/_jsx(\"td\",{children:invoices[key].status})]},key);})})]})})]})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","mondaySdk","monday","App","context","setContext","isAuthorized","setIsAuthorized","invoices","setInvoices","clientId","setClientId","clientSecret","setClientSecret","redirectUri","setRedirectUri","execute","listen","res","data","fetchInvoices","get","then","response","fetchedInvoices","catch","error","console","handleAuthorizeClick","authorizationUrl","encodeURIComponent","window","location","href","urlParams","URLSearchParams","search","authorized","e","target","value","Object","keys","map","key","invoiceNumber","amountDue","reference","status"],"sources":["/home/fatima/Xero-react/src/App.js"],"sourcesContent":["import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport axios from 'axios'\nimport mondaySdk from \"monday-sdk-js\";\n\n\n// Usage of mondaySDK example, for more information visit here: https://developer.monday.com/apps/docs/introduction-to-the-sdk/\nconst monday = mondaySdk();\n\nconst App = () => {\n  const [context, setContext] = useState();\n  const [isAuthorized, setIsAuthorized] = useState(false);\n  const [invoices, setInvoices] = useState({});\n  const [clientId, setClientId] = useState('');\n  const [clientSecret, setClientSecret] = useState('');\n  const [redirectUri, setRedirectUri] = useState('');\n\n  useEffect(() => {\n    // Notice this method notifies the monday platform that user gains a first value in an app.\n    // Read more about it here: https://developer.monday.com/apps/docs/mondayexecute#value-created-for-user/\n    monday.execute(\"valueCreatedForUser\");\n\n    // TODO: set up event listeners, Here`s an example, read more here: https://developer.monday.com/apps/docs/mondaylisten/\n    monday.listen(\"context\", (res) => {\n      setContext(res.data);\n    });\n  }, []);\n\n  const fetchInvoices = () => {\n    axios.get('https://i9j279set4.execute-api.us-east-1.amazonaws.com/prod/invoice')\n      .then(response => {\n        const fetchedInvoices = response.data;\n        setInvoices(fetchedInvoices.invoices);\n      })\n      .catch(error => {\n        console.error('Error fetching invoices:', error);\n      });\n  };\n\n  const handleAuthorizeClick = () => {\n    // Construct the authorization URL with user-provided credentials\n    const authorizationUrl = `https://i9j279set4.execute-api.us-east-1.amazonaws.com/prod/connect?clientId=${encodeURIComponent(clientId)}&clientSecret=${encodeURIComponent(clientSecret)}&redirectUri=${encodeURIComponent(redirectUri)}`;\n\n    // Redirect the user to the authorization URL\n    window.location.href = authorizationUrl;\n  };\n\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const authorized = urlParams.get('authorized');\n\n    if (authorized === 'true') {\n      setIsAuthorized(true);\n    }\n  }, []);\n\n\n \n\n \n  return (\n    <div className=\"container text-center mb-5 mt-5\">\n\n      {!isAuthorized ? (\n        <div class=\"mb-5\">\n          <h2 class=\"mb-5\">Enter Your Xero API Credentials</h2>\n\n          <div class=\"input-group mb-3 shadow\">\n            <span class=\"input-group-text\" id=\"inputGroup-sizing-default\">Client Id</span>\n            <input\n              type=\"text\"\n              value={clientId}\n              onChange={(e) => setClientId(e.target.value)}\n              class=\"form-control \"\n\n            />\n          </div>\n          <div class=\"input-group mb-3 shadow\">\n            <span class=\"input-group-text\" id=\"inputGroup-sizing-default\">Client Secret</span>\n            <input\n              type=\"text\"\n              value={clientSecret}\n              onChange={(e) => setClientSecret(e.target.value)}\n              class=\"form-control \"\n\n            />\n          </div>\n          <div class=\"input-group mb-3 shadow\">\n            <span class=\"input-group-text\" id=\"inputGroup-sizing-default\">Redirect Uri</span>\n            <input\n              type=\"text\"\n              value={redirectUri}\n              onChange={(e) => setRedirectUri(e.target.value)}\n              class=\"form-control \"\n\n            />\n          </div>\n          <button onClick={handleAuthorizeClick} class=\"btn btn-outline-dark btn-lg\">Submit</button>\n        </div>\n      ) : (\n        <div>\n          <button className=\"btn btn-dark btn-lg mb-3\" onClick={fetchInvoices}>\n            Fetch Invoices\n          </button>\n          <div className=\"table-responsive\">\n            <table className=\"table table-striped\">\n              <thead>\n                <tr>\n                  <th>Invoice Number</th>\n                  <th>Amount Due</th>\n                  <th>Reference</th>\n                  <th>Status</th>\n                </tr>\n              </thead>\n              <tbody>\n                {Object.keys(invoices).map(key => (\n                  <tr key={key}>\n                    <td>{invoices[key].invoiceNumber}</td>\n                    <td>{invoices[key].amountDue}</td>\n                    <td>{invoices[key].reference}</td>\n                    <td>{invoices[key].status}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}